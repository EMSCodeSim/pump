<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"/>
  <title>FireOps Calc — Fire pump calculator for hydrants, tender shuttle & line math</title>
  <meta name="description" content="Phone-friendly fire pump calculator for hydrants, static sources, and tender shuttle operations. Quickly compute PDP, % drop to estimate additional lines, shuttle GPM with round-trip timers, and fast line math presets."/>
  <link rel="canonical" href=https://fireopscalc.com/"/>

  <!-- Open Graph -->
  <meta property="og:type" content="website"/>
  <meta property="og:title" content="FireOps Calc — Fast fire pump calculations"/>
  <meta property="og:description" content="Hydrant % drop to estimate additional lines, tender shuttle GPM after each round trip, and quick line math — built for phones on the rig."/>
  <meta property="og:url" content="https://fireopscalc.com/"/>
  <meta property="og:image" content="https://fireopscalc.com/fireopscalc.png"/>

  <!-- Twitter -->
  <meta name="twitter:card" content="summary_large_image"/>
  <meta name="twitter:title" content="FireOps Calc — Fast fire pump calculations"/>
  <meta name="twitter:description" content="Hydrant % drop to estimate additional lines, tender shuttle GPM after each round trip, and quick line math — built for phones on the rig."/>
  <meta name="twitter:image" content="https://fireopscalc.com/fireopscalc.png"/>

  <!-- Icons -->
  <link rel="icon" type="image/png" href="/fireopscalc.png"/>
  <link rel="apple-touch-icon" href="/fireopscalc.png"/>

  <!-- SEO basics -->
  <meta name="theme-color" content="#111827"/>

  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-6W3WSFVFGW"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){ dataLayer.push(arguments); }
    gtag('js', new Date());
    gtag('config', 'G-6W3WSFVFGW');
  </script>

  <!-- SoftwareApplication schema -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "SoftwareApplication",
    "name": "FireOps Calc",
    "applicationCategory": "EducationalApplication",
    "operatingSystem": "Web",
    "offers": {
      "@type": "Offer",
      "price": "0",
      "priceCurrency": "USD"
    }
  }
  </script>

  <style>
    :root{
      --bg:#0b1020;
      --card:#141a2f;
      --text:#e5e7eb;
      --muted:#9ca3af;
      --accent:#38bdf8;
      --good:#22c55e;
      --bad:#ef4444;
      --ring:#1f2937;
    }
    *{box-sizing:border-box}
    html,body{margin:0;padding:0;height:100%;background:var(--bg);color:var(--text);font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif; -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale}
    a{color:var(--accent);text-decoration:none}
    header{
      position:sticky;top:0;z-index:10;
      background:linear-gradient(180deg, rgba(10,15,30,0.95), rgba(10,15,30,0.7) 90%, transparent);
      backdrop-filter: blur(6px);
      border-bottom:1px solid rgba(255,255,255,0.05);
    }
    .wrap{max-width:900px;margin:0 auto;padding:16px}
    .brand{
      display:flex;align-items:center;gap:12px;
    }
    .brand img{width:36px;height:36px;border-radius:8px;box-shadow:0 2px 10px rgba(0,0,0,0.35)}
    .brand h1{font-size:18px;margin:0}
    .sub{font-size:12px;color:var(--muted)}
    .grid{display:grid;gap:12px}
    @media(min-width:700px){ .grid{grid-template-columns:1fr 1fr} }
    .card{background:var(--card);border:1px solid rgba(255,255,255,0.06);border-radius:14px;padding:14px;box-shadow: 0 8px 30px rgba(0,0,0,0.25)}
    .card h2{font-size:16px;margin:0 0 6px}
    .row{display:flex;gap:10px;flex-wrap:wrap;align-items:center}
    .row > *{flex:1}
    input,select,button{
      background:#0e1426;border:1px solid var(--ring);color:var(--text);
      padding:10px 12px;border-radius:10px;font-size:14px;width:100%;
      outline:none
    }
    button{cursor:pointer}
    .pill{display:inline-block;padding:4px 10px;border-radius:999px;font-size:12px;background:#0e1426;border:1px solid var(--ring);color:var(--muted)}
    .muted{color:var(--muted)}
    .good{color:var(--good)}
    .bad{color:var(--bad)}
    .section-title{display:flex;align-items:center;justify-content:space-between;margin:6px 0}
    .kpi{display:flex;gap:8px;flex-wrap:wrap}
    .kpi .bubble{position:relative;background:#0e1426;border:1px solid var(--ring);padding:10px 12px;border-radius:12px;min-width:120px}
    .kpi .bubble .label{font-size:12px;color:var(--muted)}
    .kpi .bubble .value{font-weight:700;font-size:18px}
    .bottom-nav{
      position:sticky;bottom:0;z-index:20;background:rgba(10,15,30,0.9);backdrop-filter: blur(6px);
      border-top:1px solid rgba(255,255,255,0.06);
    }
    .bottom-nav .wrap{display:flex;gap:8px}
    .navbtn{flex:1;background:#0e1426;border:1px solid var(--ring);color:var(--text);padding:10px;border-radius:12px;text-align:center}
    .navbtn.active{border-color:var(--accent);box-shadow:0 0 0 2px rgba(56,189,248,0.25) inset}
    .tip{
      position:relative;border-left:3px solid var(--accent);padding:8px 12px;background:#0e1426;border-radius:10px;margin-top:10px;color:var(--muted)
    }
    .hdr-right{display:flex;align-items:center;gap:10px}
    .website{font-size:12px;color:var(--muted)}
    .hero-note{font-size:12px;color:var(--muted);margin-top:6px}
    .logo-badge{
      position:absolute;left:50%;top:8px;transform:translateX(-50%);background:var(--card);
      border:1px solid rgba(255,255,255,0.07);border-radius:999px;padding:4px 10px;font-size:12px;display:flex;align-items:center;gap:8px
    }
    .logo-badge img{width:18px;height:18px;border-radius:4px}
    .visually-hidden{position:absolute;left:-10000px;top:auto;width:1px;height:1px;overflow:hidden}
  </style>
</head>
<body>
  <header>
    <div class="wrap">
      <div class="brand">
        <img src="/fireopscalc.png" alt="FireOps Calc logo"/>
        <div>
          <h1>FireOps Calc</h1>
          <div class="sub">Hydrants • Tender Shuttle • Line Math</div>
        </div>
        <div class="hdr-right" style="margin-left:auto">
          <span class="website">fireopscalc.com</span>
        </div>
      </div>
    </div>
  </header>

  <main class="wrap">
    <div class="logo-badge">
      <img src="/fireopscalc.png" alt="FireOpsCalc"/>
      Fire pump calculator — phone-first
    </div>

    <!-- Views -->
    <section id="view-calc" class="card">
      <div class="section-title">
        <h2>Line Calculations</h2>
        <span class="pill">Defaults on reload</span>
      </div>

      <div class="kpi" id="calc-kpis">
        <div class="bubble"><div class="label">Total Flow</div><div class="value" id="kpi-total-flow">0 gpm</div></div>
        <div class="bubble"><div class="label">Max PDP</div><div class="value" id="kpi-max-pdp">0 psi</div></div>
      </div>

      <div class="row">
        <select id="preset-1">
          <option value="">Preset 1 — select</option>
          <option value="150@75">1¾” Fog 150 @ 75</option>
          <option value="160@50">1¾” Smooth 160 @ 50</option>
          <option value="200@50">2½” Smooth 200 @ 50</option>
        </select>
        <input id="len-1" type="number" placeholder="Length (ft)"/>
      </div>

      <div class="row">
        <select id="preset-2">
          <option value="">Preset 2 — select</option>
          <option value="150@75">1¾” Fog 150 @ 75</option>
          <option value="160@50">1¾” Smooth 160 @ 50</option>
          <option value="200@50">2½” Smooth 200 @ 50</option>
        </select>
        <input id="len-2" type="number" placeholder="Length (ft)"/>
      </div>

      <div class="row">
        <button id="add-line">Add line</button>
        <button id="reset-lines">Reset lines</button>
      </div>

      <p class="tip">Tip: On every page load, hose lines are reset to default. Use “Save setup” (in Settings) only if you purposely want to persist a layout for the session.</p>
    </section>

    <section id="view-water" class="card">
      <div class="section-title">
        <h2>Water Supply</h2>
        <span class="pill">Hydrant • Static • Shuttle</span>
      </div>

      <div class="row">
        <select id="source">
          <option value="hydrant">Hydrant</option>
          <option value="static">Static</option>
          <option value="shuttle">Tender shuttle</option>
        </select>
        <input id="hydrant-static" type="number" placeholder="Hydrant: static (psi)"/>
        <input id="hydrant-residual" type="number" placeholder="Hydrant: residual (psi)"/>
      </div>

      <div class="row">
        <button id="calc-drop">Calc % drop</button>
        <input id="drop-result" readonly placeholder="% drop shows here"/>
      </div>

      <div class="row">
        <div style="flex:1">
          <label class="muted" for="tender-count">Tenders</label>
          <input id="tender-count" type="number" min="0" placeholder="0"/>
        </div>
        <div style="flex:1">
          <label class="muted" for="tender-cap">Capacity (gal)</label>
          <input id="tender-cap" type="number" min="0" placeholder="3000"/>
        </div>
      </div>

      <div class="row">
        <button id="start-trip">Start round trip</button>
        <button id="stop-trip">Stop</button>
        <input id="trip-seconds" readonly placeholder="Trip seconds"/>
      </div>

      <div class="row">
        <button id="calc-shuttle">Calc shuttle GPM</button>
        <input id="shuttle-gpm" readonly placeholder="Shuttle GPM"/>
      </div>

      <div id="hydrant-advice" class="tip" style="display:none"></div>
    </section>

    <section id="view-settings" class="card">
      <div class="section-title"><h2>Settings</h2></div>
      <div class="row">
        <button id="settingsBtn">Open settings</button>
      </div>
      <p class="hero-note">FireOpsCalc is a training helper. Always follow your department SOP/SOG and manufacturer specs.</p>
    </section>
  </main>

  <nav class="bottom-nav">
    <div class="wrap">
      <button class="navbtn active" data-view="calc">Calculations</button>
      <button class="navbtn" data-view="water">Water Supply</button>
      <button class="navbtn" data-view="settings">Settings</button>
    </div>
  </nav>

  <!-- Reset hose-line state on every load BEFORE the app boots -->
  <script>
    (function () {
      const keys = ['hoselines', 'lineState', 'calcState', 'calc_lines', 'calc_presets'];
      try {
        keys.forEach(k => { localStorage.removeItem(k); sessionStorage.removeItem(k); });
      } catch (e) {}

      window.FIREOPSCALC_RESET_ON_LOAD = true;

      window.addEventListener('pageshow', (ev) => {
        if (ev.persisted) {
          try {
            keys.forEach(k => { localStorage.removeItem(k); sessionStorage.removeItem(k); });
          } catch (e) {}
          window.FIREOPSCALC_RESET_ON_LOAD = true;
        }
      });
    })();
  </script>

  <script type="module" src="/js/app.js"></script>

  <!-- Minimal inline boot helpers for demo navigation/kpis (safe if app.js overrides) -->
  <script>
    (function(){
      // Demo-only defaults & UI glue; your app.js can replace these.
      const $ = sel => document.querySelector(sel);

      // Basic KPI recompute based on two rows (placeholder; app.js should own real logic)
      function recompute(){
        const p1 = $('#preset-1').value || '';
        const p2 = $('#preset-2').value || '';
        const gpm = (v)=> v? Number(v.split('@')[0]) : 0;
        const total = gpm(p1) + gpm(p2);
        $('#kpi-total-flow').textContent = `${total||0} gpm`;
        // very rough PDP stand-in
        const pdp = total? Math.round(50 + total*0.2) : 0;
        $('#kpi-max-pdp').textContent = `${pdp} psi`;
      }

      ['#preset-1','#preset-2','#len-1','#len-2'].forEach(sel=>{
        $(sel)?.addEventListener('input', recompute);
        $(sel)?.addEventListener('change', recompute);
      });
      recompute();

      // Reset button restores blank/default UI; storage is already cleared on load
      $('#reset-lines')?.addEventListener('click', () => {
        ['#preset-1','#preset-2'].forEach(sel => { const el=$(sel); if (el){ el.selectedIndex = 0; } });
        ['#len-1','#len-2'].forEach(sel => { const el=$(sel); if (el){ el.value=''; } });
        recompute();
      });

      // Hydrant % drop helper
      $('#calc-drop')?.addEventListener('click', ()=>{
        const s = Number($('#hydrant-static')?.value || 0);
        const r = Number($('#hydrant-residual')?.value || 0);
        if(!s || !r || r > s){ $('#drop-result').value='—'; return; }
        const drop = Math.round(((s - r) / s) * 100);
        $('#drop-result').value = `${drop}%`;
        const advice = $('#hydrant-advice');
        if(advice){
          advice.style.display='block';
          if (drop < 10) advice.innerHTML = 'Drop &lt; 10% — likely capacity for more lines.';
          else if (drop <= 25) advice.innerHTML = 'Drop 10–25% — additional lines possible; watch residual.';
          else advice.innerHTML = 'Drop &gt; 25% — limited capacity; consider supply changes.';
        }
      });

      // Tender shuttle stopwatch
      let t0=null, timer=null;
      $('#start-trip')?.addEventListener('click', ()=>{
        t0 = Date.now();
        timer = setInterval(()=>{
          const secs = Math.floor((Date.now()-t0)/1000);
          $('#trip-seconds').value = secs;
        },250);
      });
      $('#stop-trip')?.addEventListener('click', ()=>{
        if(timer) clearInterval(timer);
        timer=null;
      });
      $('#calc-shuttle')?.addEventListener('click', ()=>{
        const count = Number($('#tender-count').value || 0);
        const cap = Number($('#tender-cap').value || 0);
        const secs = Number($('#trip-seconds').value || 0);
        if(count<=0 || cap<=0 || secs<=0){ $('#shuttle-gpm').value='—'; return; }
        const usable = cap * 0.9; // 10% loss
        const gpm = Math.round((usable * count) / (secs/60));
        $('#shuttle-gpm').value = `${gpm} gpm`;
      });

      // Simple nav between cards
      const views = ['calc','water','settings'];
      const navTo = (view)=>{
        views.forEach(v=>{
          document.getElementById(`view-${v}`).style.display = (v===view?'block':'none');
        });
        window.dispatchEvent(new CustomEvent('nav:'+view));
        // Optional GA4 SPA tracking:
        if (typeof gtag === 'function') {
          gtag('event', 'page_view', {
            page_title: document.title,
            page_location: location.href,
            page_path: location.pathname + (location.hash || '')
          });
        }
      };
      document.getElementById('settingsBtn')?.addEventListener('click', () => navTo('settings'));
      document.querySelectorAll('.bottom-nav .navbtn').forEach(btn=>{
        btn.addEventListener('click', ()=>{
          document.querySelectorAll('.bottom-nav .navbtn').forEach(b=>b.classList.remove('active'));
          btn.classList.add('active');
          navTo(btn.dataset.view);
        });
      });
    })();
  </script>
</body>
</html>
